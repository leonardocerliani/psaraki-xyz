{
  "hash": "0f9a61c6f4f86b9c42816f8b17633b04",
  "result": {
    "markdown": "---\ntitle: \"Online Campaign Performance\"\nsubtitle: \"Marketing Analysis\"\nauthor: \"Leonardo Cerliani\"\ndate: \"8/14/2023\"\ncategories: [business analytics]\noutput:\n  html_document:\n    self_contained: true\n    toc: true\n    toc_depth: 3\n    toc_float: true\n    code_folding: hide\n    highlight: pygments\n    theme: cerulean\n    css: styles.css\nimage: \"magkaki.jpg\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(bigrquery)\nlibrary(tidyverse)\nlibrary(highcharter)\nlibrary(plotly)\nlibrary(lubridate)\nlibrary(echarts4r)\nlibrary(broom)\nlibrary(flextable)\nlibrary(reactable)\nlibrary(GGally)\nlibrary(jtools)\nlibrary(ggstatsplot)\nlibrary(viridis)\nlibrary(ggpubr)\nlibrary(htmltools)\nlibrary(ggpubr)\n\n# library(dlookr)\n\n\n# avoid the conflict with MASS::select\nselect <- dplyr::select\n\n# local folder\n# \"~/Dropbox/turing_college/Modules/Marketing_Analysis/\"\n```\n:::\n\n\n\n\n\n# Assignment\nData from the [google merchandise store](https://shop.googlemerchandisestore.com/) contains information about every browsing event from the user (e.g. page view, click item, scroll), as well as its date, timestamp, order amount and other device-specific information.\n\nCurrently **we are interested in analyzing the outcome of our marketing campaigns in the period from November 2020 to the end of January 2021**.\n\nIn particular, we are interested in assessing:\n\n- whether the campaigns resulted in a higher **conversion from browsing to purchasing**\n- whether this is related to the **amount of time spent on the website** (session length)\n- what was the **impact on the revenues**\n\nImportantly, we are also interested to **carry out the analysis for each day of the week** to assess whether there are some noticeable seasonal patterns.\n\n\n# Data Preparation {.tabset}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# The data was too big to be exported in one csv, so we have to download\n# individual months and row-bind them\n\nnov <- read_csv(\"01_nov.csv\")\ndec <- read_csv(\"02_dec.csv\")\njan <- read_csv(\"03_jan.csv\")\n\ndf <- rbind(nov, dec, jan) \n\ndf <- df %>% \n \n # rename session_length as TTP (Time-To-Purchasing) and threshold to 1 hour\n rename(TTP = session_length) %>% \n filter(TTP > 300, TTP < 3600) %>% \n\n # mutate(campaign = ifelse(campaign == \"(data deleted)\", \"generic_campaign\", campaign)) %>% \n # mutate(campaign = factor(campaign)) %>% \n \n # identify sessions with purchase and browse-only sessions\n mutate(revenue = ifelse(is.na(revenue), 0, revenue)) %>% \n mutate(purchase_session = ifelse(revenue > 0, \"YES\", \"NO\") %>% factor) %>% \n  \n # create columns for weekday_name and weekday_number\n mutate(weekday_num = wday(event_date, week_start = 1) %>% factor) %>% \n mutate(weekday_name = wday(event_date, week_start = 1, label = T) %>% factor) \n```\n:::\n\n\n\n## Identifying sessions\nThe database does not contain unequivocal information about the start and the end of a session, therefore we had to devise a suitable procedure for the existing data. This was carried out in SQL (the dataset consists of ~4 million rows). In brief:\n\n- The session_start event was chosen to define the start of the session. Within the same day, different events with `event_name=\"session_start\"` were assigned a rank according to their timestamp\n- Every other event before the next session_start was labelled with this rank\n- Session length was calculated as the difference in seconds between the session_start event and the last event before the subsequent session_start\n- Events with no rank are those which belong to sessions started the day before, and were therefore not further considered\n\n\n\n\n## Thresholding session length\nIn a previous Product Analysis we observed that the median length of a session is ~ 20 minutes, and that the order amount stops increasing for sessions longer than 30-60 minutes. \n\nTherefore we chose to focus on session no longer than 3600 seconds (1 hour). We also repeated the analyses below with other thresholds (20, 120 minutes or no threshold) and we observed virtually identical results.\n\n![](/Users/leonardo/Dropbox/turing_college/Modules/Marketing_Analysis/imgs/revenue_vs_session_length.png)\n\n## Pooling all campaigns together\n\nWe know that there is a problem with the data: the campaign reference of the purchases (e.g. Black Friday or New Year's eve) are lost, and were replaced with `(data_deleted)`. The very few remaining are related to events in sessions where the campaign was not recorded in the `purchase` event row, but still present among the events of that session - therefore we decided to assign that purchase to that campaign.\n\nStill, the number of purchases in different campaigns is negligible with respect to the total number of data points, which prevents us to stratify the analysis per campaign.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n select(campaign, purchase_session) %>% \n group_by(campaign, purchase_session) %>% \n count %>% \n mutate(\n  purchase_session = ifelse(purchase_session==\"YES\",\"purchase session\",\"browsing only\")\n ) %>% \n pivot_wider(names_from = purchase_session, values_from = n) %>% \n mutate(`purchase session` = ifelse(is.na(`purchase session`),0,`purchase session`)) %>% \n flextable\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div class=\"tabwid\"><style>.cl-ad5377fc{}.cl-ad482f50{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ad4cb4b2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ad4cb4bc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ad4cd4b0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ad4cd4ba{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ad4cd4c4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ad4cd4c5{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ad4cd4ce{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ad4cd4cf{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-ad5377fc'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-ad4cd4b0\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">campaign</span></p></th><th class=\"cl-ad4cd4ba\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">browsing only</span></p></th><th class=\"cl-ad4cd4ba\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">purchase session</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">(data deleted)</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">848</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">62</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">BlackFriday_V1</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">1</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">BlackFriday_V2</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">1</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">Data Share Promo</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">152</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">Holiday_V2</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">1</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">NewYear_V1</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">4</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4c4\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">NewYear_V2</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">2</span></p></td><td class=\"cl-ad4cd4c5\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ad4cd4ce\"><p class=\"cl-ad4cb4b2\"><span class=\"cl-ad482f50\">none</span></p></td><td class=\"cl-ad4cd4cf\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">50,799</span></p></td><td class=\"cl-ad4cd4cf\"><p class=\"cl-ad4cb4bc\"><span class=\"cl-ad482f50\">3,822</span></p></td></tr></tbody></table></div>\n\n`````\n:::\n:::\n\n\n<br>\n\nTherefore we will aggregate all the different campaigns into a generic campaign YES/NO column, and examine the other metrics (revenue and TTP) according to whether they relate to *any* campaign or to no campaign.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df %>% \n mutate(campaign = ifelse(campaign == \"none\", \"NO\", \"YES\") %>% factor)\n```\n:::\n\n\n\n\n\n\n<br>\n\n\n# Analysis\n\n## Fail to increase conversion rate {.tabset}\n\n**Overall, we don't obseve a difference in the conversion rate** - from browsing only to purchasing - **due to campains**\n\nWhen no campaigns are present on the website, 7% of all the visits result in a purchase. Comparably, when a campaign is running, 6% of the visitors end up purchasing.\n\nThe conversion rate for campaign sessions appears to be slightly higher on Thursday and Friday, but not more than what can be expected by chance.\n\n\n### Overall conversion rate\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncontingency_table <- df %>% \n  select(campaign, purchase_session) %>% \n  group_by(campaign, purchase_session) %>% \n  count() %>% \n  pivot_wider(names_from = purchase_session, values_from = n, values_fill = 0)\n\n# --------------  ggbarstats --------------------------\n\n# Conversion rate across all days\nggbarstats(\n data = df,\n x = purchase_session,\n y = campaign,\n label = \"both\",\n results.subtitle = F\n) + \n scale_fill_manual(values = c(\"#F8766D\",\"#00BFC4\")) +\n labs(\n  title = \"Conversion rate in all sessions (campaign and no-campaign)\",\n  x = \"Campaign\"\n )\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/association_campaign_purchase_2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# The following two are replaced by the line plot in the next tab\n\n# # Conversion rate for each day in campaign sessions\n# ggbarstats(\n#  data = df %>% filter(campaign == \"YES\"),\n#  x = purchase_session,\n#  y = weekday_name,\n#  label = \"both\",\n#  results.subtitle = F\n# ) +\n#  scale_fill_manual(values = c(\"#F8766D\",\"#00BFC4\")) +\n#  labs(\n#   title = \"Conversion rate in campaign sessions\",\n#   x = \"Day of the week\"\n#  )\n# \n# \n# \n# # Conversion rate for each day in no-campaign sessions\n# ggbarstats(\n#  data = df %>% filter(campaign == \"NO\"),\n#  x = purchase_session,\n#  y = weekday_name,\n#  label = \"both\",\n#  results.subtitle = F\n# ) +\n#  scale_fill_manual(values = c(\"#F8766D\",\"#00BFC4\")) +\n#  labs(\n#   title = \"Conversion rate in NO-campaign sessions\",\n#   x = \"Day of the week\"\n#  )\n```\n:::\n\n\n\n\n### Per weekday\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Barplot and line plot of the conversion rates\nddf <- df %>%\n group_by(weekday_name, campaign, purchase_session) %>% \n count() %>% \n group_by(weekday_name, campaign) %>% \n mutate(total = sum(n)) %>% \n filter(purchase_session == \"YES\") %>% \n mutate(conversion_rate = round(n/total*100,1))  \n # select(weekday_name, campaign, conversion_rate)\n\n\nddf %>%\n mutate(campaign = fct_rev(campaign)) %>% \n ggplot(\n  aes(x = weekday_name, y = conversion_rate, color = campaign, \n      group = campaign,\n      text = paste(\"Campaign:\", campaign, \"<br>Conversion Rate:\", conversion_rate, \"%\"))\n ) +\n # geom_bar(aes(fill = campaign), stat = \"identity\", position = \"dodge\") +\n geom_line() +\n geom_point() +\n theme_minimal() +\n labs(\n  title = \"Conversion rate for campaing and no-campaign sessions\",\n  x = \"Day of the week\",\n  y = \"Conversion Rate\"\n ) +\n scale_y_continuous(labels = scales::percent_format(scale = 1)) -> gg\n\nggplotly(gg, tooltip = \"text\", config = list(displayModeBar = FALSE))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-0a67e421bc28ea77ee42\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0a67e421bc28ea77ee42\">{\"x\":{\"data\":[{\"x\":[1,2,3,4,5,6,7],\"y\":[2.1,6.2,7.2,6.3,8.2,4.2,3.9],\"text\":[\"Campaign: YES <br>Conversion Rate: 2.1 %\",\"Campaign: YES <br>Conversion Rate: 6.2 %\",\"Campaign: YES <br>Conversion Rate: 7.2 %\",\"Campaign: YES <br>Conversion Rate: 6.3 %\",\"Campaign: YES <br>Conversion Rate: 8.2 %\",\"Campaign: YES <br>Conversion Rate: 4.2 %\",\"Campaign: YES <br>Conversion Rate: 3.9 %\"],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(248,118,109,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":5.66929133858268,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(248,118,109,1)\"}},\"frame\":null},{\"x\":[1,2,3,4,5,6,7],\"y\":[7.5,7.1,7,6.1,7.9,7.6,5.5],\"text\":[\"Campaign: NO <br>Conversion Rate: 7.5 %\",\"Campaign: NO <br>Conversion Rate: 7.1 %\",\"Campaign: NO <br>Conversion Rate: 7 %\",\"Campaign: NO <br>Conversion Rate: 6.1 %\",\"Campaign: NO <br>Conversion Rate: 7.9 %\",\"Campaign: NO <br>Conversion Rate: 7.6 %\",\"Campaign: NO <br>Conversion Rate: 5.5 %\"],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,191,196,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"opacity\":1,\"size\":5.66929133858268,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,191,196,1)\"}},\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":37.2602739726027},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Conversion rate for campaing and no-campaign sessions\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[1.795,8.505],\"tickmode\":\"array\",\"ticktext\":[\"2%\",\"4%\",\"6%\",\"8%\"],\"tickvals\":[2,4,6,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2%\",\"4%\",\"6%\",\"8%\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Conversion Rate\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d37b21df1884\":{\"x\":{},\"y\":{},\"colour\":{},\"text\":{},\"type\":\"scatter\"},\"d37b3dc2937b\":{\"x\":{},\"y\":{},\"colour\":{},\"text\":{}}},\"cur_data\":\"d37b21df1884\",\"visdat\":{\"d37b21df1884\":[\"function (y) \",\"x\"],\"d37b3dc2937b\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n### No significant difference in proportions\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Wednesday\nprop_Thu <- ddf %>% \n filter(weekday_name == \"Wed\") %>% \n rename(n_converted = n) %>% \n ungroup() %>% \n select(n_converted, total) %>% \n arrange(total)\n\ncat(\"Wednesday\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWednesday\n```\n:::\n\n```{.r .cell-code}\nprop.test(x = prop_Thu$n_converted, n = prop_Thu$total, alternative = \"greater\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\t2-sample test for equality of proportions with continuity correction\n\ndata:  prop_Thu$n_converted out of prop_Thu$total\nX-squared = 1.388e-28, df = 1, p-value = 0.5\nalternative hypothesis: greater\n95 percent confidence interval:\n -0.03071573  1.00000000\nsample estimates:\n    prop 1     prop 2 \n0.07179487 0.07021663 \n```\n:::\n\n```{.r .cell-code}\n# Thursday\nprop_Thu <- ddf %>% \n filter(weekday_name == \"Thu\") %>% \n rename(n_converted = n) %>% \n ungroup() %>% \n select(n_converted, total) %>% \n arrange(total)\n\ncat(\"Thursday\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThursday\n```\n:::\n\n```{.r .cell-code}\nprop.test(x = prop_Thu$n_converted, n = prop_Thu$total, alternative = \"greater\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\t2-sample test for equality of proportions with continuity correction\n\ndata:  prop_Thu$n_converted out of prop_Thu$total\nX-squared = 1.2833e-28, df = 1, p-value = 0.5\nalternative hypothesis: greater\n95 percent confidence interval:\n -0.02947896  1.00000000\nsample estimates:\n    prop 1     prop 2 \n0.06349206 0.06127591 \n```\n:::\n\n```{.r .cell-code}\n# Friday\nprop_Fri <- ddf %>% \n filter(weekday_name == \"Fri\") %>% \n rename(n_converted = n) %>% \n ungroup() %>% \n select(n_converted, total) %>% \n arrange(total)\n\n\ncat(\"Friday\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFriday\n```\n:::\n\n```{.r .cell-code}\nprop.test(x = prop_Fri$n_converted, n = prop_Fri$total, alternative = \"greater\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\t2-sample test for equality of proportions with continuity correction\n\ndata:  prop_Fri$n_converted out of prop_Fri$total\nX-squared = 2.6122e-29, df = 1, p-value = 0.5\nalternative hypothesis: greater\n95 percent confidence interval:\n -0.03484194  1.00000000\nsample estimates:\n    prop 1     prop 2 \n0.08187135 0.07921039 \n```\n:::\n:::\n\n\n\n\n\n\n## Session length differ, but not in an interesting way {.tabset}\n\n**Campaign sessions and purchase sessions (either on- or off-campaign) are significantly slighltly longer** (up to 5 minutes) **, however there is no interaction between campaign and session type (browse-only or purchasing)**. For instance, it is _not_ the case that campaign sessions are longer for purchase and shorter for browse-only with respect to no-campaign sessions.\n\nAs expected from the previous anova, **campaign sessions are slightly longer each day of the week**, although the median value is associated with high variability.\n\nOn Saturday the _purchasing_ campaign session is on average much shorter than the sessions not related to a campaign. However, a closer inspection shows that these are just 4 purchasing events, which makes a statistical comparison meaningless.\n\n\n### Session time by conversion and campaign\n\nNB: Boxplots show session time in seconds, however anova2 was run on log(session_time) to approximate normally distributed values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nddf <- df %>% \n select(TTP, campaign, purchase_session) %>%\n mutate(logTTP = log(TTP)) %>% \n mutate(campaign = fct_rev(campaign))\n\n# # Table\n# ddf %>%\n#  group_by(campaign, purchase_session) %>%\n#  reframe(mean_TTP = mean(TTP))\n\n\nddf %>% \n select(logTTP, campaign, purchase_session) %>% \n ggboxplot(\n  x = \"purchase_session\", y = \"logTTP\", color = \"campaign\"\n ) +\n scale_y_continuous(trans = \"exp\", labels = function(x)(round(exp(x)))) +\n labs(\n  title = \"Difference in session length\",\n  subtitle = \"for purchase/browse-only during and off campaign\",\n  y = \"Session length in seconds\",\n  x = \"Is purchase session\"\n )\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nanova2 <- aov(formula = logTTP ~ campaign * purchase_session, data = ddf)\ncat(\"Session time is higher for campaign and purchase, but there is no interaction\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSession time is higher for campaign and purchase, but there is no interaction\n```\n:::\n\n```{.r .cell-code}\nsummary(anova2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                             Df Sum Sq Mean Sq F value   Pr(>F)    \ncampaign                      1      5    4.99  13.181 0.000283 ***\npurchase_session              1    300  299.77 791.219  < 2e-16 ***\ncampaign:purchase_session     1      1    0.55   1.458 0.227199    \nResiduals                 55688  21099    0.38                     \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n\n```{.r .cell-code}\n# plot(anova2)\n# car::Anova(anova2, type = \"III\")\n```\n:::\n\n\n\n\n### Session length during or outside a campaign\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# define a fn to produce the three following plots\nplot_session_length <- function(df, title) {\n df %>% \n group_by(weekday_name, campaign) %>% \n reframe(\n  weekday_name = unique(weekday_name),\n  median_TTP = median(TTP),\n  MAD_low = floor(median(TTP) - mad(TTP)),\n  MAD_high = ceiling(median(TTP) + mad(TTP))\n ) %>%\n mutate(campaign = fct_rev(campaign)) %>%\n ggplot(aes(x = weekday_name, y = median_TTP, fill = campaign)) +\n geom_col(position = \"dodge\") +\n geom_errorbar(\n  aes(ymin = MAD_low, ymax = MAD_high),\n  position = position_dodge(width = 0.9),  # Adjust width for dodge position\n  width = 0.2, color = \"grey\"  # Width of error bars\n ) +\n labs(title = title, \n      x = \"Day of the week\",\n      y = \"Median TTP\") +\n theme_minimal() +\n  theme(\n    legend.position = \"bottom\",\n    panel.grid.major.x = element_blank(),  # Remove vertical grid lines\n    panel.grid.minor = element_blank()     # Remove minor grid lines\n  ) -> gg\n\n return(ggplotly(gg) %>% config(displayModeBar = FALSE))\n}\n\n\n# overall session length (purchase and browse-only sessions)\nplot_session_length(\n df,\n title = \"Overall session length in- and outside campaign\"\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-4903ac2e1e6977062472\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4903ac2e1e6977062472\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[866.5,786,890,813,922,933,880],\"text\":[\"weekday_name: Mon<br />median_TTP: 866.5<br />campaign: YES\",\"weekday_name: Tue<br />median_TTP: 786.0<br />campaign: YES\",\"weekday_name: Wed<br />median_TTP: 890.0<br />campaign: YES\",\"weekday_name: Thu<br />median_TTP: 813.0<br />campaign: YES\",\"weekday_name: Fri<br />median_TTP: 922.0<br />campaign: YES\",\"weekday_name: Sat<br />median_TTP: 933.0<br />campaign: YES\",\"weekday_name: Sun<br />median_TTP: 880.0<br />campaign: YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[787,784,799,790,794,801,783],\"text\":[\"weekday_name: Mon<br />median_TTP: 787.0<br />campaign: NO\",\"weekday_name: Tue<br />median_TTP: 784.0<br />campaign: NO\",\"weekday_name: Wed<br />median_TTP: 799.0<br />campaign: NO\",\"weekday_name: Thu<br />median_TTP: 790.0<br />campaign: NO\",\"weekday_name: Fri<br />median_TTP: 794.0<br />campaign: NO\",\"weekday_name: Sat<br />median_TTP: 801.0<br />campaign: NO\",\"weekday_name: Sun<br />median_TTP: 783.0<br />campaign: NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[866.5,786,890,813,922,933,880],\"text\":[\"weekday_name: Mon<br />median_TTP: 866.5<br />campaign: YES<br />MAD_low: 232<br />MAD_high: 1501\",\"weekday_name: Tue<br />median_TTP: 786.0<br />campaign: YES<br />MAD_low: 304<br />MAD_high: 1268\",\"weekday_name: Wed<br />median_TTP: 890.0<br />campaign: YES<br />MAD_low: 230<br />MAD_high: 1550\",\"weekday_name: Thu<br />median_TTP: 813.0<br />campaign: YES<br />MAD_low: 233<br />MAD_high: 1393\",\"weekday_name: Fri<br />median_TTP: 922.0<br />campaign: YES<br />MAD_low: 348<br />MAD_high: 1496\",\"weekday_name: Sat<br />median_TTP: 933.0<br />campaign: YES<br />MAD_low: 331<br />MAD_high: 1535\",\"weekday_name: Sun<br />median_TTP: 880.0<br />campaign: YES<br />MAD_low: 313<br />MAD_high: 1447\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[634.5,482,660,580,574,602,567],\"arrayminus\":[634.5,482,660,580,574,602,567],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[787,784,799,790,794,801,783],\"text\":[\"weekday_name: Mon<br />median_TTP: 787.0<br />campaign: NO<br />MAD_low: 241<br />MAD_high: 1333\",\"weekday_name: Tue<br />median_TTP: 784.0<br />campaign: NO<br />MAD_low: 239<br />MAD_high: 1329\",\"weekday_name: Wed<br />median_TTP: 799.0<br />campaign: NO<br />MAD_low: 240<br />MAD_high: 1358\",\"weekday_name: Thu<br />median_TTP: 790.0<br />campaign: NO<br />MAD_low: 245<br />MAD_high: 1335\",\"weekday_name: Fri<br />median_TTP: 794.0<br />campaign: NO<br />MAD_low: 243<br />MAD_high: 1345\",\"weekday_name: Sat<br />median_TTP: 801.0<br />campaign: NO<br />MAD_low: 253<br />MAD_high: 1349\",\"weekday_name: Sun<br />median_TTP: 783.0<br />campaign: NO<br />MAD_low: 249<br />MAD_high: 1317\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[546,545,559,545,551,548,534],\"arrayminus\":[546,545,559,545,551,548,534],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":48.9497716894977},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Overall session length in- and outside campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-77.5,1627.5],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Median TTP\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":false},\"source\":\"A\",\"attrs\":{\"d37b50497737\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"},\"d37b731e50f\":{\"x\":{},\"y\":{},\"fill\":{},\"ymin\":{},\"ymax\":{}}},\"cur_data\":\"d37b50497737\",\"visdat\":{\"d37b50497737\":[\"function (y) \",\"x\"],\"d37b731e50f\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n### Session length for Purchasing sessions (TTP)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_session_length(\n df %>% filter(purchase_session == \"YES\"),\n title = \"Purchase sessions length in- and outside campaign\"\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ce8c7fcb027725fea392\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ce8c7fcb027725fea392\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[1117,1078,1030.5,1221,929,585.5,1077.5],\"text\":[\"weekday_name: Mon<br />median_TTP: 1117.0<br />campaign: YES\",\"weekday_name: Tue<br />median_TTP: 1078.0<br />campaign: YES\",\"weekday_name: Wed<br />median_TTP: 1030.5<br />campaign: YES\",\"weekday_name: Thu<br />median_TTP: 1221.0<br />campaign: YES\",\"weekday_name: Fri<br />median_TTP:  929.0<br />campaign: YES\",\"weekday_name: Sat<br />median_TTP:  585.5<br />campaign: YES\",\"weekday_name: Sun<br />median_TTP: 1077.5<br />campaign: YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[1077,1053,1165,1033,1052.5,1180,953],\"text\":[\"weekday_name: Mon<br />median_TTP: 1077.0<br />campaign: NO\",\"weekday_name: Tue<br />median_TTP: 1053.0<br />campaign: NO\",\"weekday_name: Wed<br />median_TTP: 1165.0<br />campaign: NO\",\"weekday_name: Thu<br />median_TTP: 1033.0<br />campaign: NO\",\"weekday_name: Fri<br />median_TTP: 1052.5<br />campaign: NO\",\"weekday_name: Sat<br />median_TTP: 1180.0<br />campaign: NO\",\"weekday_name: Sun<br />median_TTP:  953.0<br />campaign: NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[1117,1078,1030.5,1221,929,585.5,1077.5],\"text\":[\"weekday_name: Mon<br />median_TTP: 1117.0<br />campaign: YES<br />MAD_low: 1010<br />MAD_high: 1224\",\"weekday_name: Tue<br />median_TTP: 1078.0<br />campaign: YES<br />MAD_low:  526<br />MAD_high: 1630\",\"weekday_name: Wed<br />median_TTP: 1030.5<br />campaign: YES<br />MAD_low:  198<br />MAD_high: 1863\",\"weekday_name: Thu<br />median_TTP: 1221.0<br />campaign: YES<br />MAD_low:  536<br />MAD_high: 1906\",\"weekday_name: Fri<br />median_TTP:  929.0<br />campaign: YES<br />MAD_low:  656<br />MAD_high: 1202\",\"weekday_name: Sat<br />median_TTP:  585.5<br />campaign: YES<br />MAD_low:  413<br />MAD_high:  758\",\"weekday_name: Sun<br />median_TTP: 1077.5<br />campaign: YES<br />MAD_low:  172<br />MAD_high: 1983\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[107,552,832.5,685,273,172.5,905.5],\"arrayminus\":[107,552,832.5,685,273,172.5,905.5],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[1077,1053,1165,1033,1052.5,1180,953],\"text\":[\"weekday_name: Mon<br />median_TTP: 1077.0<br />campaign: NO<br />MAD_low:  343<br />MAD_high: 1811\",\"weekday_name: Tue<br />median_TTP: 1053.0<br />campaign: NO<br />MAD_low:  326<br />MAD_high: 1780\",\"weekday_name: Wed<br />median_TTP: 1165.0<br />campaign: NO<br />MAD_low:  403<br />MAD_high: 1927\",\"weekday_name: Thu<br />median_TTP: 1033.0<br />campaign: NO<br />MAD_low:  316<br />MAD_high: 1750\",\"weekday_name: Fri<br />median_TTP: 1052.5<br />campaign: NO<br />MAD_low:  340<br />MAD_high: 1765\",\"weekday_name: Sat<br />median_TTP: 1180.0<br />campaign: NO<br />MAD_low:  366<br />MAD_high: 1994\",\"weekday_name: Sun<br />median_TTP:  953.0<br />campaign: NO<br />MAD_low:  321<br />MAD_high: 1585\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[734,727,762,717,712.5,814,632],\"arrayminus\":[734,727,762,717,712.5,814,632],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":48.9497716894977},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Purchase sessions length in- and outside campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-99.7,2093.7],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\",\"2000\"],\"tickvals\":[0,500,1000,1500,2000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\",\"2000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Median TTP\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":false},\"source\":\"A\",\"attrs\":{\"d37b29c857b8\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"},\"d37b1ff70676\":{\"x\":{},\"y\":{},\"fill\":{},\"ymin\":{},\"ymax\":{}}},\"cur_data\":\"d37b29c857b8\",\"visdat\":{\"d37b29c857b8\":[\"function (y) \",\"x\"],\"d37b1ff70676\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\n# # The following compares TTP for campaign and no-campaign\n# # on Saturday, when the TTP appears shorter. However, a closer\n# # inspection reveals that these are just 4 observations, therefore\n# # a statistical test is meaningless\n\n# ddf <- df %>%\n#  filter(purchase_session == \"YES\", weekday_name == \"Sat\") %>%\n#  select(campaign, TTP)\n# \n# ggbetweenstats(\n#  data = ddf,\n#  x = campaign,\n#  y = TTP\n# ) + \n#  scale_y_continuous(trans = \"log\")\n#\n# ddf %>% filter(campaign == \"YES\")\n\n\n# # The following carries out an anova TTP ~ weekday * campaign\n# # There are no significant differences\n# ddf <- df %>% \n#  filter(purchase_session == \"YES\") %>% \n#  select(TTP, campaign, weekday_name) %>% \n#  mutate(logTTP = log(TTP))\n# \n# anova2 <- aov(TTP ~ campaign * weekday_name, data = ddf)\n# summary(anova2)\n# car::Anova(anova2, type = \"III\")\n```\n:::\n\n\n### Browse-only sessions (no purchase)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_session_length(\n df %>% filter(purchase_session == \"NO\"),\n title = \"Browse-only sessions length in- and outside campaign\"\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-b905b585c7480b1a6cbb\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b905b585c7480b1a6cbb\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[855,737,889,787,922,944,880],\"text\":[\"weekday_name: Mon<br />median_TTP: 855.0<br />campaign: YES\",\"weekday_name: Tue<br />median_TTP: 737.0<br />campaign: YES\",\"weekday_name: Wed<br />median_TTP: 889.0<br />campaign: YES\",\"weekday_name: Thu<br />median_TTP: 787.0<br />campaign: YES\",\"weekday_name: Fri<br />median_TTP: 922.0<br />campaign: YES\",\"weekday_name: Sat<br />median_TTP: 944.0<br />campaign: YES\",\"weekday_name: Sun<br />median_TTP: 880.0<br />campaign: YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999],\"base\":[0,0,0,0,0,0,0],\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[766,765,771,773,770.5,777,772],\"text\":[\"weekday_name: Mon<br />median_TTP: 766.0<br />campaign: NO\",\"weekday_name: Tue<br />median_TTP: 765.0<br />campaign: NO\",\"weekday_name: Wed<br />median_TTP: 771.0<br />campaign: NO\",\"weekday_name: Thu<br />median_TTP: 773.0<br />campaign: NO\",\"weekday_name: Fri<br />median_TTP: 770.5<br />campaign: NO\",\"weekday_name: Sat<br />median_TTP: 777.0<br />campaign: NO\",\"weekday_name: Sun<br />median_TTP: 772.0<br />campaign: NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0.775,1.775,2.775,3.775,4.775,5.775,6.775],\"y\":[855,737,889,787,922,944,880],\"text\":[\"weekday_name: Mon<br />median_TTP: 855.0<br />campaign: YES<br />MAD_low: 211<br />MAD_high: 1499\",\"weekday_name: Tue<br />median_TTP: 737.0<br />campaign: YES<br />MAD_low: 268<br />MAD_high: 1206\",\"weekday_name: Wed<br />median_TTP: 889.0<br />campaign: YES<br />MAD_low: 230<br />MAD_high: 1548\",\"weekday_name: Thu<br />median_TTP: 787.0<br />campaign: YES<br />MAD_low: 229<br />MAD_high: 1345\",\"weekday_name: Fri<br />median_TTP: 922.0<br />campaign: YES<br />MAD_low: 330<br />MAD_high: 1514\",\"weekday_name: Sat<br />median_TTP: 944.0<br />campaign: YES<br />MAD_low: 333<br />MAD_high: 1555\",\"weekday_name: Sun<br />median_TTP: 880.0<br />campaign: YES<br />MAD_low: 315<br />MAD_high: 1445\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[644,469,659,558,592,611,565],\"arrayminus\":[644,469,659,558,592,611,565],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1.225,2.225,3.225,4.225,5.225,6.225,7.225],\"y\":[766,765,771,773,770.5,777,772],\"text\":[\"weekday_name: Mon<br />median_TTP: 766.0<br />campaign: NO<br />MAD_low: 241<br />MAD_high: 1291\",\"weekday_name: Tue<br />median_TTP: 765.0<br />campaign: NO<br />MAD_low: 237<br />MAD_high: 1293\",\"weekday_name: Wed<br />median_TTP: 771.0<br />campaign: NO<br />MAD_low: 238<br />MAD_high: 1304\",\"weekday_name: Thu<br />median_TTP: 773.0<br />campaign: NO<br />MAD_low: 243<br />MAD_high: 1303\",\"weekday_name: Fri<br />median_TTP: 770.5<br />campaign: NO<br />MAD_low: 238<br />MAD_high: 1303\",\"weekday_name: Sat<br />median_TTP: 777.0<br />campaign: NO<br />MAD_low: 250<br />MAD_high: 1304\",\"weekday_name: Sun<br />median_TTP: 772.0<br />campaign: NO<br />MAD_low: 245<br />MAD_high: 1299\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[525,528,533,530,532.5,527,527],\"arrayminus\":[525,528,533,530,532.5,527,527],\"type\":\"data\",\"width\":2.33333333333334,\"symmetric\":false,\"color\":\"rgba(190,190,190,1)\"},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":48.9497716894977},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Browse-only sessions length in- and outside campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-77.75,1632.75],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Median TTP\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":false},\"source\":\"A\",\"attrs\":{\"d37b76ad47be\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"},\"d37b6a4147d0\":{\"x\":{},\"y\":{},\"fill\":{},\"ymin\":{},\"ymax\":{}}},\"cur_data\":\"d37b76ad47be\",\"visdat\":{\"d37b76ad47be\":[\"function (y) \",\"x\"],\"d37b6a4147d0\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n<br>\n\n## Revenues highest at mid-week {.tabset}\n\n**The highest revenues for campaign-related orders were generated at mid-week**, while they were much lower during the weekend and on Monday.\n\nThere are also differences in the median amount order between campaign and no-campaign sessions in some days, however not more than what could be expected by chance (assessed with an anova2).\n\n\n### Total revenue due to campaigns\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(purchase_session == \"YES\", campaign == \"YES\") %>%\n  select(weekday_name, revenue) %>% \n  group_by(weekday_name) %>% \n  reframe(\n    total_revenue = sum(revenue)\n  ) %>% \n  ggplot(aes(x = weekday_name, y = total_revenue, \n   text = paste(weekday_name, \"\\n\",\"Total Revenue: \", total_revenue, \"US$\"))\n  ) +\n  geom_bar(stat = \"identity\", fill = \"#F8766D\") +\n  labs(\n   title = \"Total revenue from campaign orders\",\n   x = \"Day of the week\",\n   y = \"Total revenue in USD\"\n  ) +\n  theme_minimal() -> gg\n\nggplotly(gg, tooltip = \"text\") %>% config(displayModeBar = FALSE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-078e892edb65a4b6e1d2\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-078e892edb65a4b6e1d2\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[108,884,1102,815,850,309,144],\"text\":[\"Mon <br /> Total Revenue:  108 US$\",\"Tue <br /> Total Revenue:  884 US$\",\"Wed <br /> Total Revenue:  1102 US$\",\"Thu <br /> Total Revenue:  815 US$\",\"Fri <br /> Total Revenue:  850 US$\",\"Sat <br /> Total Revenue:  309 US$\",\"Sun <br /> Total Revenue:  144 US$\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":43.1050228310502},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Total revenue from campaign orders\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-55.1,1157.1],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"300\",\"600\",\"900\"],\"tickvals\":[0,300,600,900],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"300\",\"600\",\"900\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Total revenue in USD\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":false},\"source\":\"A\",\"attrs\":{\"d37b14df6713\":{\"x\":{},\"y\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d37b14df6713\",\"visdat\":{\"d37b14df6713\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n### Range of order values\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n filter(purchase_session == \"YES\") %>%\n select(weekday_name, revenue, campaign) %>% \n group_by(weekday_name, campaign) %>% \n mutate(campaign = fct_rev(campaign)) %>%\n ggplot(aes(x = weekday_name, y = revenue, fill = campaign)) +\n geom_boxplot() +\n # scale_y_continuous(limits = c(0,120)) +\n scale_y_continuous(breaks = seq(0, max(df$revenue), by = 100)) +\n labs(\n  title = \"Order value in- and outside-campaign\",\n  x = \"Day of the week\",\n  y = \"Revenue\"\n ) +\n theme_minimal() -> gg\n\n\nggplotly(gg) %>%\n layout(yaxis = list(range = c(0, 140))) %>% \n layout(boxmode = \"group\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-326b21c5b78d3994cfad\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-326b21c5b78d3994cfad\">{\"x\":{\"data\":[{\"x\":[2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,1,1,1],\"y\":[14,58,48,74,99,92,57,279,56,88,19,98,88,86,83,65,44,86,158,17,55,89,121,39,73,122,101,7,79,75,37,99,67,60,48,17,68,103,34,29,83,38,92,86,59,12,62,112,14,37,63,168,55,110,37,19,44,28,53,48,11,49],\"hoverinfo\":\"y\",\"type\":\"box\",\"fillcolor\":\"rgba(248,118,109,1)\",\"marker\":{\"opacity\":null,\"outliercolor\":\"rgba(0,0,0,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"},\"size\":5.66929133858268},\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":1.88976377952756},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6],\"y\":[46,25,32,120,48,87,34,72,59,63,114,60,94,21,22,24,97,13,48,25,20,52,70,46,243,29,40,70,55,20,142,14,159,78,40,65,63,48,131,69,39,65,92,48,63,28,12,214,55,37,233,56,75,111,85,13,226,68,40,35,63,37,21,17,50,6,227,107,19,48,48,41,73,54,42,99,32,75,75,43,16,206,30,149,26,69,408,718,128,51,25,71,93,50,134,106,42,44,90,20,44,58,290,52,32,142,352,36,178,32,238,36,44,64,570,302,66,230,76,61,143,210,34,13,24,131,239,92,54,16,58,16,140,12,20,68,39,42,39,28,52,55,128,16,29,217,34,42,262,28,2,24,16,15,72,27,14,30,25,39,30,45,34,16,78,342,46,34,82,92,36,54,72,22,15,73,100,272,23,52,50,10,235,38,7,13,89,51,115,22,81,59,282,100,314,60,64,55,40,93,101,30,24,38,17,25,155,134,22,118,68,48,49,292,104,97,95,75,73,48,59,43,77,17,30,32,67,84,18,55,66,24,5,32,44,108,74,37,44,156,55,96,140,92,33,128,18,90,151,12,40,196,16,55,42,48,21,174,90,129,16,10,22,55,38,33,129,209,104,55,41,48,22,14,44,236,147,13,80,22,48,67,50,30,85,11,148,69,79,26,43,157,58,140,83,85,34,64,96,110,204,114,56,194,71,37,61,48,37,87,96,158,48,30,30,28,25,99,46,456,76,20,154,38,10,44,40,130,100,86,120,38,32,44,42,79,46,66,60,87,28,70,82,40,42,24,10,11,37,19,44,19,31,18,34,28,55,62,26,82,16,62,57,28,60,31,120,54,465,154,24,223,35,56,88,50,44,91,10,8,100,394,26,133,44,28,42,212,58,35,140,63,150,122,95,30,122,47,46,46,67,92,15,22,177,44,74,50,55,24,247,191,65,51,127,78,71,23,38,124,44,140,34,38,98,99,32,88,16,13,170,35,325,46,43,54,56,84,8,34,159,32,208,47,211,771,72,152,183,92,44,25,26,30,124,52,147,64,58,36,17,66,56,68,48,47,50,89,92,29,231,63,671,17,30,152,44,172,34,175,96,46,27,20,126,22,216,33,58,79,37,27,75,11,12,212,7,386,24,356,114,26,344,48,118,305,75,46,176,71,998,44,55,34,44,22,55,98,80,37,744,34,91,25,58,174,441,32,6,214,198,48,406,116,76,136,175,54,35,8,91,37,22,24,61,48,37,44,58,44,125,13,13,24,117,51,75,134,56,14,203,139,48,115,66,22,24,144,98,40,102,55,56,58,16,125,18,269,71,6,55,18,6,179,16,20,46,712,74,84,34,46,55,55,47,145,44,41,108,48,30,19,14,106,92,36,63,28,23,41,58,36,86,42,30,90,246,18,99,70,53,76,21,18,51,41,24,92,144,74,112,60,14,32,192,59,51,93,86,162,58,20,38,63,16,66,175,24,40,70,55,443,191,25,206,110,30,144,26,51,27,76,14,35,41,82,49,99,43,24,62,93,74,17,3,87,107,95,51,98,20,22,157,61,85,16,21,111,5,84,44,19,43,97,52,50,19,64,44,13,25,117,22,54,48,38,145,99,114,44,116,33,16,40,69,104,160,31,24,189,48,27,57,72,118,13,71,52,34,83,13,26,13,15,17,158,32,13,10,104,46,13,32,181,57,194,90,162,91,66,107,30,13,46,272,40,28,77,8,42,40,58,44,39,88,156,54,53,110,171,55,28,92,30,328,45,16,182,89,23,336,93,220,34,50,22,71,51,63,80,104,31,82,32,32,194,17,16,58,52,857,32,174,66,92,82,276,38,48,34,144,12,54,24,35,51,21,19,25,22,82,158,42,245,101,16,123,46,14,10,14,40,92,70,132,87,143,26,42,118,298,44,35,19,61,63,86,11,10,88,194,109,34,58,536,44,26,232,618,17,43,62,40,22,126,28,41,128,104,96,55,93,48,246,106,42,190,81,64,56,66,100,305,84,35,30,420,70,35,62,45,12,95,24,79,20,31,81,130,84,84,59,81,30,23,76,70,11,149,46,152,14,13,40,33,72,106,53,6,75,60,40,11,24,40,28,73,194,96,33,56,106,108,299,50,18,111,48,55,71,48,92,37,19,48,50,19,141,24,79,14,72,42,168,18,85,65,42,65,116,60,37,27,166,69,19,12,60,81,219,176,103,30,47,13,79,103,55,19,50,79,25,30,15,11,10,61,8,26,318,30,68,42,13,162,48,41,57,49,40,16,29,88,33,32,404,77,46,72,673,11,55,29,119,38,44,20,365,204,3,5,21,25,66,130,27,88,17,24,67,87,54,34,30,62,44,94,60,16,24,24,120,24,72,11,71,110,55,16,46,30,82,58,43,46,93,11,14,525,145,61,40,38,62,32,50,40,60,362,89,53,36,449,18,93,182,48,97,96,32,120,16,4,112,70,38,71,33,55,101,21,79,202,371,49,62,63,43,44,55,24,92,98,28,20,28,197,88,129,30,26,99,62,27,223,103,8,216,154,48,177,80,34,64,386,65,46,76,82,149,37,10,91,44,79,242,130,149,27,42,36,44,166,44,48,21,133,48,23,21,353,48,20,44,183,52,36,50,151,90,35,30,44,13,55,93,54,12,37,30,122,20,14,55,80,24,38,50,30,13,44,46,84,44,169,44,39,48,15,60,21,48,74,33,7,94,203,209,77,112,82,41,61,44,19,79,6,126,78,50,23,20,98,37,128,24,20,28,64,71,24,24,384,95,30,44,26,80,28,24,20,33,24,38,61,86,12,17,53,50,63,38,13,87,84,30,22,26,31,63,96,305,30,42,91,16,29,44,131,60,43,84,29,22,13,63,32,52,30,94,271,57,26,62,88,69,46,24,6,128,8,96,30,48,12,123,48,272,44,38,80,256,26,147,32,128,242,103,80,82,88,28,194,24,88,142,140,52,24,6,79,96,254,79,32,40,76,56,62,88,41,22,38,48,151,88,109,37,32,111,55,44,134,204,172,13,90,52,116,24,32,39,56,68,13,60,86,72,46,70,48,166,55,11,89,54,30,110,104,27,62,200,74,89,247,13,90,126,48,55,67,41,16,54,20,105,35,263,49,50,24,32,32,38,92,38,42,12,156,238,5,248,7,35,158,24,73,18,122,99,62,14,22,27,81,49,55,44,246,80,130,704,14,67,16,16,48,36,92,153,28,25,540,111,82,10,79,37,18,34,80,79,98,105,32,256,40,13,44,15,83,85,280,80,96,396,34,22,55,60,148,188,20,26,24,30,39,44,160,16,84,188,102,82,60,13,35,106,42,165,24,183,32,13,68,119,144,98,79,58,49,34,216,28,89,155,68,22,47,18,80,56,95,92,48,20,210,93,58,15,41,26,67,59,16,23,104,58,132,311,62,287,33,80,33,266,79,66,23,62,72,156,142,21,24,61,39,76,174,62,62,67,86,90,18,13,33,130,44,126,22,23,87,85,20,24,93,56,92,214,16,31,76,33,111,50,14,2,50,27,53,28,20,240,83,32,1200,178,13,43,19,92,32,25,50,12,97,69,96,114,140,64,156,148,37,91,44,273,94,80,46,72,18,44,23,27,56,72,20,73,21,21,24,24,96,55,45,106,13,173,71,53,265,63,32,36,61,48,54,14,22,17,12,14,10,29,25,42,63,76,60,587,22,49,31,16,68,53,324,34,28,55,116,55,98,90,16,55,35,58,133,41,110,88,218,76,32,605,55,47,10,270,53,47,98,11,129,37,10,23,151,8,90,76,53,92,14,18,24,40,24,157,76,55,13,44,32,171,112,85,48,50,20,58,28,22,130,34,219,54,29,231,76,150,46,39,57,159,299,54,88,16,167,97,48,207,24,141,19,37,29,48,57,40,45,86,27,219,683,32,147,21,23,361,63,60,110,37,211,24,49,24,141,84,110,83,22,13,55,75,21,41,44,16,14,291,20,86,26,31,141,138,184,600,20,17,136,28,10,162,30,58,20,32,71,61,123,142,26,19,92,87,184,72,48,36,25,16,57,20,72,64,1,65,123,55,46,50,100,18,44,44,18,14,17,14,309,53,42,71,110,60,24,58,14,24,44,72,114,50,47,326,41,64,38,22,71,70,44,32,24,23,59,178,110,51,26,18,137,32,164,82,74,204,59,86,46,50,46,46,32,40,40,24,59,6,30,49,110,96,48,132,59,44,11,22,30,38,32,16,19,16,56,24,74,27,17,19,86,214,30,32,44,23,656,35,67,147,30,67,240,55,27,36,34,63,32,37,52,101,82,163,156,82,88,203,22,46,41,54,184,170,29,16,70,45,7,34,36,78,165,136,55,182,46,25,130,90,71,94,168,155,15,60,80,44,13,35,63,109,48,44,56,28,24,142,5,42,74,146,48,41,73,92,142,14,188,100,44,551,24,40,10,59,13,14,58,25,133,134,31,32,32,14,22,55,446,91,18,37,43,87,30,135,46,56,55,176,44,32,189,163,44,108,113,84,54,75,79,30,38,58,23,105,178,72,40,228,164,120,19,60,68,139,10,12,125,20,22,100,32,65,16,36,56,89,266,26,32,115,104,62,99,55,60,48,114,53,40,5,266,71,118,55,110,111,32,14,174,588,22,34,50,32,81,22,48,207,50,63,13,15,94,61,30,70,55,56,30,53,40,178,185,42,124,60,54,144,81,32,16,94,22,48,55,34,124,55,295,37,24,25,22,8,10,71,13,38,19,40,16,128,81,47,20,44,93,70,176,376,161,21,141,55,22,36,104,166,168,75,93,14,29,53,68,66,118,153,96,108,374,44,119,65,32,96,6,94,67,46,46,79,87,113,39,35,36,85,109,89,36,66,73,77,6,6,128,45,76,10,112,17,22,48,66,185,120,5,84,103,19,48,477,24,16,34,173,89,10,86,48,31,92,150,480,83,93,6,10,86,98,86,32,99,106,43,50,48,192,113,72,176,76,84,141,89,21,18,42,32,89,85,55,26,24,22,96,92,37,132,174,107,21,162,24,86,122,85,162,27,51,35,19,61,77,19,24,30,63,28,132,63,88,72,42,57,25,47,23,3,110,48,32,103,20,135,44,13,16,55,117,18,53,192,32,89,7,63,66,132,166,41,33,71,4,152,70,78,140,70,38,108,21,62,55,49,92,97,27,48,168,80,14,145,87,76,14,65,55,19,80,50,237,24,18,42,29,84,30,44,53,184,32,46,166,58,52,76,28,55,82,11,258,36,4,43,66,120,30,16,21,24,98,22,48,80,10,42,35,92,194,92,40,60,48,34,83,55,48,44,12,154,16,38,96,98,97,96,55,55,105,79,68,80,16,91,47,48,59,8,117,76,87,12,30,159,45,44,16,190,66,54,99,170,42,14,100,26,42,24,98,13,25,94,162,136,23,32,28,76,98,35,100,32,14,93,13,87,132,15,345,55,48,71,94,52,40,78,452,88,38,484,44,395,112,173,24,42,180,20,15,210,86,117,311,26,13,30,35,132,40,61,44,255,55,86,55,30,85,15,56,74,94,40,108,96,336,40,8,56,526,111,154,7,108,190,103,364,104,25,34,49,143,50,46,73,44,153,20,26,48,66,62,50,44,28,92,55,40,865,40,61,30,44,54,96,133,151,32,46,53,82,42,86,18,53,56,16,30,13,38,16,300,26,14,96,28,60,106,33,25,120,104,17,60,152,24,32,136,33,52,152,266,67,95,18,1424,75,162,31,40,31,95,10,27,59,58,71,69,55,84,83,10,34,123,86,99,40,107,73,175,34,56,60,14,48,41,225,256,7,54,46,20,63,19,14,42,42,48,41,32,13,39,81,94,44,16,97,19,63,44,62,14,37,24,34,38,27,21,28,108,30,36,110,24,46,84,92,55,79,12,78,44,24,14,14,66,62,149,30,48,79,40,40,102,12,60,22,32,70,24,52,56,41,30,65,25,36,71,86,49,16,18,93,19,375,37,66,180,68,152,52,10,92,26,100,37,74,13,33,14,108,33,32,121,49,19,14,92,25,24,45,10,79,24,16,96,137,112,63,31,63,30,68,708,70,60,110,32,20,61,199,23,38,159,54,30,72,23,20,90,34,28,8,50,139,28,161,44,44,89,191,68,14,32,20,32,44,42,129,16,156,88,101,245,25,101,32,35,13,11,16,76,60,79,78,96,18,40,19,80,8,140,36,110,50,16,44,69,116,138,194,15,33,47,68,8,126,27,190,125,32,194,264,73,138,124,198,14,90,69,26,84,77,14,103,58,61,83,88,72,17,84,30,40,66,40,30,58,111,69,72,65,30,47,14,15,192,32,48,25,81,10,22,40,30,38,11,16,95,91,49,89,90,75,184,19,48,19,22,112,193,34,199,14,30,18,112,76,6,29,44,71,86,30,175,14,103,62,32,68,54,79,42,38,16,32,63,176,96,37,10,73,38,14,42,45,72,74,26,26,14,44,64,137,57,147,13,34,22,128,21,84,240,75,58,90,19,298,12,189,16,38,46,68,50,21,232,58,34,70,119,131,135,88,92,48,45,13,35,11,79,22,99,83,68,23,305,19,39,142,56,20,52,39,24,32,678,60,236,178,212,152,56,24,118,96,168,226,13,94,139,123,56,36,45,55,66,45,18,56,78,18,47,192,27,34,30,50,16,18,81,76,50,61,32,41,125,219,20,15,43,71,100,54,44,16,46,82,157,1170,128,52,292,34,48,24,66,188,181,88,71,125,149,126,6,13,66,163,177,113,25,78,80,32,55,14,135,38,48,55,14,81,38,32,108,35,102,25,143,79,18,145,60,48,23,152,33,61,17,72,50,8,16,79,13,38,38,24,37,62,140,24,34,68,29,113,55,29,30,61,86,6,5,284,424,48,680,38,79,32,188,11,122,112,12,93,52,22,55,126,10,198,164,24,508,64,110,48,176,199,116,98,298,142,88,116,136,110,284,80,42,354,46,86,646,62,15,180,55,106,11,10,14,55,28,48,30,63,116,92,59,79,42,30,135,173,17,24,78,24,42,55,34,112,104,92,110,13,32,109,21,130,168,120,41,42,18,13,10,22,35,359,102,60,47,32,30,116,48,70,61,15,32,27,60,221,110,20,205,44,28,26,51,12,48,20,86,164,78,50,33,134,13,326,55,66,33,16,85,32,32,96,79,49,43,91,128,22,94,168,44,197,138,63,7,55,38,14,16,49,90,32,305,100,37,49,52,128,32,197,362,44,30,72,12,351,46,128,30,44,145,28,56,135,42,58,96,52,13,50,44,94,150,96,54,51,56,17,12,347,83,64,22,24,38,51,70,91,38,28,96,54,102,29,71,31,89,86,120,50,73,112,28,86,87,51,77,5,176,34,32,117,38,22,16,47,42,144,66,77,44,51,21,400,576,40,46,129,57,44,146,114,40,39,62,44,16,55,38,26,118,58,41,208,92,84,110,155,139,278,142,85,26,16,55,30,22,16,32,237,169,40,35,99,99,48,28,24,14,33,100,216,287,74,96,41,15,14,53,139,67,88,30,50,99,20,78,24,46,88,39,82,28,13,38,160,86,111,55,69,56,48,82,32,63,133,61,96,43,127,67,20,173,54,47,80,50,177,190,48,55,21,32,60,22,32,38,140,46,38,28,32,40,99,32,3,102,180,63,99,73,81,90,11,85,44,24,38,73,12,23,44,208,18,154,904,60,49,41,48,127,34,60,127,35,55,100,44,21,136,30,25,52,146,61,24,73,354,30,157,23,123,215,48,76,146,63,78,44,58,21,39,18,36,14,76,46,119,120,119,149,144,270,93,139,90,135,109,150,64,165,71,97,46,3,85,73,86,92,11,32,67,40,148,77,63,48,17,156,85,53,84,70,55,71,31,64,120,163,30,139,14,77,112,88,12,26,71,53,236,14,39,140,4,58,57,18,66,16,54,88,46,17,56,114,92,20,88,6,35,27,522,167,99,14,67,13,30,40,176,17,56,69,119,48,57,10,46,92,48,56,223,44,85,122,26,24,92,61,24,13,30,135,10,44,6,38,13,200,168,32,96,31,104,72,8,155,31,70,90,7,56,43,88,16,40,21,188,298,128,120,35,48,26,191,41,21,90,90,42,45,50,80,46,84,39,170,54,26,94,91,33,40,12,131,69,146,118,45,24,110,30,40,123,25,185,82,69,98,10,75,67,22,36,53,141,79,28,18,50,18,100,33,98,41,136,307,120,34,92,5,81,90,183,341,42,13,80,49,53,21,87,19,79,30,24,45,96,153,71,101,51,8,40,48,55,322,66,44,38,32,65,163,86,86,164,132,22,111,16,30,30,233,26,109,42,48,162,63,48,79,56,4,52,56,38,100,48,28,92,11,14,44,152,50,21,370,68,92,96,322,26,30,46,10,41,30,65,377,109,34,218,75,113,62,173,10,46,25,35,97,50,176,20,75,18,16,239,77,224,77,46,81,14,102,69,38,99,53,16,21,84,79,6,71,66,38,77,18,63,34,8,21,62,71,35,40,88,133,59,44,28,156,320,16,139,81,43,112,71,231,92,99,50,71,62,16,118,44,55,314,112,37,117,18,63,108,102,28,30,83,20,70,96,138,36,134,98,128,64,98,55,145,262,48,44,194,13,88,44,28],\"hoverinfo\":\"y\",\"type\":\"box\",\"fillcolor\":\"rgba(0,191,196,1)\",\"marker\":{\"opacity\":null,\"outliercolor\":\"rgba(0,0,0,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"},\"size\":5.66929133858268},\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":1.88976377952756},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":48.9497716894977},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Order value in- and outside-campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Day of the week\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,140],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\",\"700\",\"800\",\"900\",\"1000\",\"1100\",\"1200\",\"1300\",\"1400\"],\"tickvals\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\",\"700\",\"800\",\"900\",\"1000\",\"1100\",\"1200\",\"1300\",\"1400\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Revenue\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\",\"boxmode\":\"group\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d37b1d7d8db6\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"box\"}},\"cur_data\":\"d37b1d7d8db6\",\"visdat\":{\"d37b1d7d8db6\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\n# Anova 2 : revenue ~ weekday_name * campaign\n# No significant difference.\n\nddf <- df %>% \n filter(purchase_session == \"YES\") %>% \n select(revenue, weekday_name, campaign) %>% \n mutate(log_revenue = log(revenue))\n\ncat(\"No significant effect of of mean log_revenue or campaign\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNo significant effect of of mean log_revenue or campaign\n```\n:::\n\n```{.r .cell-code}\nanova2 <- aov(log_revenue ~ weekday_name * campaign, data = ddf)\nsummary(anova2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                        Df Sum Sq Mean Sq F value Pr(>F)\nweekday_name             6    4.5  0.7583   0.994  0.427\ncampaign                 1    0.0  0.0211   0.028  0.868\nweekday_name:campaign    6    3.4  0.5662   0.742  0.615\nResiduals             3870 2951.9  0.7628               \n```\n:::\n\n```{.r .cell-code}\n# Note that revenues are log-normally distributed\n# however this has no effect on the anova2\ndf$revenue[df$revenue > 0] %>% log() %>% hist(main = \"Log(revenue)\")\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/range_order_values-2.png){width=672}\n:::\n:::\n\n\n\n\n### Total revenues for in- and out-campaign\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(purchase_session == \"YES\") %>%\n  select(weekday_name, revenue, campaign) %>% \n  group_by(weekday_name, campaign) %>% \n  mutate(campaign = fct_rev(campaign)) %>%\n  reframe(\n    total_revenue = sum(revenue)\n  ) %>% \n  ggplot(aes(\n   x = weekday_name, y = total_revenue, \n   fill = campaign, \n   text = paste(weekday_name, \"\\n\",\"Total Revenue: \", total_revenue, \"\\n\", \"Campaign: \", campaign))\n  ) +\n  geom_bar(stat = \"identity\") +\n  # scale_y_continuous(\n  #   trans = \"log\",\n  #   labels = function(x) round(x)\n  # ) +\n theme_minimal() -> gg\n\nggplotly(gg, tooltip = \"text\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-35b137753709225d6783\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-35b137753709225d6783\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],\"base\":[51674,53076,52001,40863,51028,33828,22855],\"x\":[1,2,3,4,5,6,7],\"y\":[108,884,1102,815,850,309,144],\"text\":[\"Mon <br /> Total Revenue:  108 <br /> Campaign:  YES\",\"Tue <br /> Total Revenue:  884 <br /> Campaign:  YES\",\"Wed <br /> Total Revenue:  1102 <br /> Campaign:  YES\",\"Thu <br /> Total Revenue:  815 <br /> Campaign:  YES\",\"Fri <br /> Total Revenue:  850 <br /> Campaign:  YES\",\"Sat <br /> Total Revenue:  309 <br /> Campaign:  YES\",\"Sun <br /> Total Revenue:  144 <br /> Campaign:  YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[51674,53076,52001,40863,51028,33828,22855],\"text\":[\"Mon <br /> Total Revenue:  51674 <br /> Campaign:  NO\",\"Tue <br /> Total Revenue:  53076 <br /> Campaign:  NO\",\"Wed <br /> Total Revenue:  52001 <br /> Campaign:  NO\",\"Thu <br /> Total Revenue:  40863 <br /> Campaign:  NO\",\"Fri <br /> Total Revenue:  51028 <br /> Campaign:  NO\",\"Sat <br /> Total Revenue:  33828 <br /> Campaign:  NO\",\"Sun <br /> Total Revenue:  22855 <br /> Campaign:  NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.2283105022831,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":54.7945205479452},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,7.6],\"tickmode\":\"array\",\"ticktext\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"tickvals\":[1,2,3,4,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"weekday_name\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-2698,56658],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20000\",\"40000\"],\"tickvals\":[0,20000,40000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20000\",\"40000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"total_revenue\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d37b3472626a\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d37b3472626a\",\"visdat\":{\"d37b3472626a\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## ROI: 91.17%\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# NB: here we consider again the initial data, with no threshold for session duration\n\nnov <- read_csv(\"01_nov.csv\")\ndec <- read_csv(\"02_dec.csv\")\njan <- read_csv(\"03_jan.csv\")\n\ntotal_df <- rbind(nov, dec, jan)\n\nmarketing_cost <- read_csv(\"adsense_monthly.csv\")\ncost_of_campaigns <- sum(marketing_cost$Cost) %>% round(2)\n\n\ncampaigns_revenues <- total_df[total_df$campaign != \"none\", \"revenue\"] %>% na.omit() %>% sum\n\n# campaigns_revenues <- total_df %>% \n#  filter(campaign != \"none\", !is.na(revenue)) %>%\n#  select(revenue) %>% pull %>% sum\n\n\nROI <- campaigns_revenues / cost_of_campaigns\n\nROI_pct <- (round(ROI,4) - 1) * 100\n\nKPI_name <- \"Return on Investment\"\n```\n:::\n\n\nReturn on Investment: The total cost for marketing campaigns was 2432.45 US\\$. The revenues generated by these campaigns were 4650 US\\$. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiv(\n  style = \"display: flex; flex-wrap: wrap; justify-content: space-around; align-items: center; font-family: sans-serif;\",\n  div(\n    style = \"background-color: #f39c12; color: white; padding: 10px; border-radius: 5px; margin: 10px; text-align: center;\",\n    div(style = \"font-size: 28px;\", KPI_name),\n    div(style = \"font-size: 36px;\", paste(ROI_pct, \"%\"))\n  )\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div style=\"display: flex; flex-wrap: wrap; justify-content: space-around; align-items: center; font-family: sans-serif;\">\n<div style=\"background-color: #f39c12; color: white; padding: 10px; border-radius: 5px; margin: 10px; text-align: center;\">\n<div style=\"font-size: 28px;\">Return on Investment</div>\n<div style=\"font-size: 36px;\">91.17 %</div>\n</div>\n</div>\n```\n:::\n\n```{.r .cell-code}\n# table with the cost of every marketing campaign\nmarketing_cost %>% \n group_by(Campaign) %>%\n reframe(\n  cost = round(sum(Cost),2)\n ) %>% flextable()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div class=\"tabwid\"><style>.cl-b0566cb6{}.cl-b0484762{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b04f0cb4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b04f0cc8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b04f8478{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b04f848c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b04f848d{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b04f8496{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b04f84a0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b04f84a1{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-b0566cb6'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-b04f8478\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">Campaign</span></p></th><th class=\"cl-b04f848c\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">cost</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">BlackFriday_V1</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">164.49</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">BlackFriday_V2</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">364.14</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">Data Share Promo</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">1,430.17</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">Holiday_V1</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">143.78</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">Holiday_V2</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">129.10</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f848d\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">NewYear_V1</span></p></td><td class=\"cl-b04f8496\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">44.30</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-b04f84a0\"><p class=\"cl-b04f0cb4\"><span class=\"cl-b0484762\">NewYear_V2</span></p></td><td class=\"cl-b04f84a1\"><p class=\"cl-b04f0cc8\"><span class=\"cl-b0484762\">156.47</span></p></td></tr></tbody></table></div>\n\n`````\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<br>\n\n# Main takeaways\n\nOverall, the campaigns did not appear to benefit revenues.\n\n- The **conversion rate was comparable between campaign and no-campaign sessions**. Any apparent difference in specific days can be due to chance\n\n- **Campaigns slightly increased the total browsing time**, but did not affect the session time in purchasing sessions overall and across weekdays\n\n- **Revenues from campaign were highest in mid-week days and lowes on weekends and on monday**\n\n- These results are comparable across different choices of session length\n\n\n<br>\n\n# Appendix {.tabset}\n\n## Description\nA few other potentially interesting plots which were used during the EDA for the presented analysis.\n\n\n## Revenues and orders per day on- and off-campaign \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Daily number of orders\n\ndf %>% \n filter(purchase_session == \"YES\") %>% \n group_by(event_date, campaign) %>% \n mutate(campaign = fct_rev(campaign)) %>%\n reframe(\n  n_sales = n()\n ) %>% \n ggplot(aes(x = event_date, y = n_sales, fill = campaign)) +\n # geom_area(position = \"stack\", alpha = 0.7) +  # Area\n geom_bar(stat = \"identity\", position = \"stack\", alpha = 0.7) +  # Bars\n # geom_line(aes(color = campaign), position = \"stack\") +  # Lines\n labs(\n  title = \"Number of sales per day\",\n  x = \"Date\", y = \"Number of Orders\"\n ) +\n theme_minimal() -> gg\n\nggplotly(gg)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-bdb6c78a966317e34a4c\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-bdb6c78a966317e34a4c\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455],\"base\":[41,56,25,69,77,67,89,98,73,61,46,47,17,14,13,15,14,18,16,9,14,20,19,36,31,37,70,40,62,32,15],\"x\":[18569,18577,18580,18591,18593,18601,18611,18612,18613,18614,18618,18619,18620,18621,18622,18623,18625,18626,18627,18630,18631,18634,18638,18639,18642,18646,18647,18648,18649,18650,18653],\"y\":[1,1,1,1,2,1,2,8,7,7,1,1,2,2,1,2,2,1,1,2,2,1,1,1,1,3,2,1,2,1,1],\"text\":[\"event_date: 2020-11-03<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-11-11<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-11-14<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-11-25<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-11-27<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-05<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-12-15<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-16<br />n_sales:   8<br />campaign: YES\",\"event_date: 2020-12-17<br />n_sales:   7<br />campaign: YES\",\"event_date: 2020-12-18<br />n_sales:   7<br />campaign: YES\",\"event_date: 2020-12-22<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-12-23<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-12-24<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-25<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-26<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-12-27<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-29<br />n_sales:   2<br />campaign: YES\",\"event_date: 2020-12-30<br />n_sales:   1<br />campaign: YES\",\"event_date: 2020-12-31<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-03<br />n_sales:   2<br />campaign: YES\",\"event_date: 2021-01-04<br />n_sales:   2<br />campaign: YES\",\"event_date: 2021-01-07<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-11<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-12<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-15<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-19<br />n_sales:   3<br />campaign: YES\",\"event_date: 2021-01-20<br />n_sales:   2<br />campaign: YES\",\"event_date: 2021-01-21<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-22<br />n_sales:   2<br />campaign: YES\",\"event_date: 2021-01-23<br />n_sales:   1<br />campaign: YES\",\"event_date: 2021-01-26<br />n_sales:   1<br />campaign: YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,0.7)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[18567,18568,18569,18570,18571,18572,18573,18574,18575,18576,18577,18578,18579,18580,18581,18582,18583,18584,18585,18586,18587,18588,18589,18590,18591,18592,18593,18594,18595,18596,18597,18598,18599,18600,18601,18602,18603,18604,18605,18606,18607,18608,18609,18610,18611,18612,18613,18614,18615,18616,18617,18618,18619,18620,18621,18622,18623,18624,18625,18626,18627,18628,18629,18630,18631,18632,18633,18634,18635,18636,18637,18638,18639,18640,18641,18642,18643,18644,18645,18646,18647,18648,18649,18650,18651,18652,18653,18654,18655,18656,18657],\"y\":[11,36,41,27,23,42,21,27,35,55,56,46,57,25,18,60,77,46,35,49,31,26,51,82,69,48,77,61,38,112,76,59,72,70,67,33,75,99,108,104,127,84,49,68,89,98,73,61,35,15,42,46,47,17,14,13,15,28,14,18,16,11,10,9,14,22,22,20,29,17,12,19,36,28,38,31,19,10,13,37,70,40,62,32,28,43,15,10,3,4,4],\"text\":[\"event_date: 2020-11-01<br />n_sales:  11<br />campaign: NO\",\"event_date: 2020-11-02<br />n_sales:  36<br />campaign: NO\",\"event_date: 2020-11-03<br />n_sales:  41<br />campaign: NO\",\"event_date: 2020-11-04<br />n_sales:  27<br />campaign: NO\",\"event_date: 2020-11-05<br />n_sales:  23<br />campaign: NO\",\"event_date: 2020-11-06<br />n_sales:  42<br />campaign: NO\",\"event_date: 2020-11-07<br />n_sales:  21<br />campaign: NO\",\"event_date: 2020-11-08<br />n_sales:  27<br />campaign: NO\",\"event_date: 2020-11-09<br />n_sales:  35<br />campaign: NO\",\"event_date: 2020-11-10<br />n_sales:  55<br />campaign: NO\",\"event_date: 2020-11-11<br />n_sales:  56<br />campaign: NO\",\"event_date: 2020-11-12<br />n_sales:  46<br />campaign: NO\",\"event_date: 2020-11-13<br />n_sales:  57<br />campaign: NO\",\"event_date: 2020-11-14<br />n_sales:  25<br />campaign: NO\",\"event_date: 2020-11-15<br />n_sales:  18<br />campaign: NO\",\"event_date: 2020-11-16<br />n_sales:  60<br />campaign: NO\",\"event_date: 2020-11-17<br />n_sales:  77<br />campaign: NO\",\"event_date: 2020-11-18<br />n_sales:  46<br />campaign: NO\",\"event_date: 2020-11-19<br />n_sales:  35<br />campaign: NO\",\"event_date: 2020-11-20<br />n_sales:  49<br />campaign: NO\",\"event_date: 2020-11-21<br />n_sales:  31<br />campaign: NO\",\"event_date: 2020-11-22<br />n_sales:  26<br />campaign: NO\",\"event_date: 2020-11-23<br />n_sales:  51<br />campaign: NO\",\"event_date: 2020-11-24<br />n_sales:  82<br />campaign: NO\",\"event_date: 2020-11-25<br />n_sales:  69<br />campaign: NO\",\"event_date: 2020-11-26<br />n_sales:  48<br />campaign: NO\",\"event_date: 2020-11-27<br />n_sales:  77<br />campaign: NO\",\"event_date: 2020-11-28<br />n_sales:  61<br />campaign: NO\",\"event_date: 2020-11-29<br />n_sales:  38<br />campaign: NO\",\"event_date: 2020-11-30<br />n_sales: 112<br />campaign: NO\",\"event_date: 2020-12-01<br />n_sales:  76<br />campaign: NO\",\"event_date: 2020-12-02<br />n_sales:  59<br />campaign: NO\",\"event_date: 2020-12-03<br />n_sales:  72<br />campaign: NO\",\"event_date: 2020-12-04<br />n_sales:  70<br />campaign: NO\",\"event_date: 2020-12-05<br />n_sales:  67<br />campaign: NO\",\"event_date: 2020-12-06<br />n_sales:  33<br />campaign: NO\",\"event_date: 2020-12-07<br />n_sales:  75<br />campaign: NO\",\"event_date: 2020-12-08<br />n_sales:  99<br />campaign: NO\",\"event_date: 2020-12-09<br />n_sales: 108<br />campaign: NO\",\"event_date: 2020-12-10<br />n_sales: 104<br />campaign: NO\",\"event_date: 2020-12-11<br />n_sales: 127<br />campaign: NO\",\"event_date: 2020-12-12<br />n_sales:  84<br />campaign: NO\",\"event_date: 2020-12-13<br />n_sales:  49<br />campaign: NO\",\"event_date: 2020-12-14<br />n_sales:  68<br />campaign: NO\",\"event_date: 2020-12-15<br />n_sales:  89<br />campaign: NO\",\"event_date: 2020-12-16<br />n_sales:  98<br />campaign: NO\",\"event_date: 2020-12-17<br />n_sales:  73<br />campaign: NO\",\"event_date: 2020-12-18<br />n_sales:  61<br />campaign: NO\",\"event_date: 2020-12-19<br />n_sales:  35<br />campaign: NO\",\"event_date: 2020-12-20<br />n_sales:  15<br />campaign: NO\",\"event_date: 2020-12-21<br />n_sales:  42<br />campaign: NO\",\"event_date: 2020-12-22<br />n_sales:  46<br />campaign: NO\",\"event_date: 2020-12-23<br />n_sales:  47<br />campaign: NO\",\"event_date: 2020-12-24<br />n_sales:  17<br />campaign: NO\",\"event_date: 2020-12-25<br />n_sales:  14<br />campaign: NO\",\"event_date: 2020-12-26<br />n_sales:  13<br />campaign: NO\",\"event_date: 2020-12-27<br />n_sales:  15<br />campaign: NO\",\"event_date: 2020-12-28<br />n_sales:  28<br />campaign: NO\",\"event_date: 2020-12-29<br />n_sales:  14<br />campaign: NO\",\"event_date: 2020-12-30<br />n_sales:  18<br />campaign: NO\",\"event_date: 2020-12-31<br />n_sales:  16<br />campaign: NO\",\"event_date: 2021-01-01<br />n_sales:  11<br />campaign: NO\",\"event_date: 2021-01-02<br />n_sales:  10<br />campaign: NO\",\"event_date: 2021-01-03<br />n_sales:   9<br />campaign: NO\",\"event_date: 2021-01-04<br />n_sales:  14<br />campaign: NO\",\"event_date: 2021-01-05<br />n_sales:  22<br />campaign: NO\",\"event_date: 2021-01-06<br />n_sales:  22<br />campaign: NO\",\"event_date: 2021-01-07<br />n_sales:  20<br />campaign: NO\",\"event_date: 2021-01-08<br />n_sales:  29<br />campaign: NO\",\"event_date: 2021-01-09<br />n_sales:  17<br />campaign: NO\",\"event_date: 2021-01-10<br />n_sales:  12<br />campaign: NO\",\"event_date: 2021-01-11<br />n_sales:  19<br />campaign: NO\",\"event_date: 2021-01-12<br />n_sales:  36<br />campaign: NO\",\"event_date: 2021-01-13<br />n_sales:  28<br />campaign: NO\",\"event_date: 2021-01-14<br />n_sales:  38<br />campaign: NO\",\"event_date: 2021-01-15<br />n_sales:  31<br />campaign: NO\",\"event_date: 2021-01-16<br />n_sales:  19<br />campaign: NO\",\"event_date: 2021-01-17<br />n_sales:  10<br />campaign: NO\",\"event_date: 2021-01-18<br />n_sales:  13<br />campaign: NO\",\"event_date: 2021-01-19<br />n_sales:  37<br />campaign: NO\",\"event_date: 2021-01-20<br />n_sales:  70<br />campaign: NO\",\"event_date: 2021-01-21<br />n_sales:  40<br />campaign: NO\",\"event_date: 2021-01-22<br />n_sales:  62<br />campaign: NO\",\"event_date: 2021-01-23<br />n_sales:  32<br />campaign: NO\",\"event_date: 2021-01-24<br />n_sales:  28<br />campaign: NO\",\"event_date: 2021-01-25<br />n_sales:  43<br />campaign: NO\",\"event_date: 2021-01-26<br />n_sales:  15<br />campaign: NO\",\"event_date: 2021-01-27<br />n_sales:  10<br />campaign: NO\",\"event_date: 2021-01-28<br />n_sales:   3<br />campaign: NO\",\"event_date: 2021-01-29<br />n_sales:   4<br />campaign: NO\",\"event_date: 2021-01-30<br />n_sales:   4<br />campaign: NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,0.7)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":43.1050228310502},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Number of sales per day\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[18562.005,18661.995],\"tickmode\":\"array\",\"ticktext\":[\"Nov\",\"Dec\",\"Jan\",\"Feb\"],\"tickvals\":[18567,18597,18628,18659],\"categoryorder\":\"array\",\"categoryarray\":[\"Nov\",\"Dec\",\"Jan\",\"Feb\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Date\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-6.35,133.35],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"50\",\"100\"],\"tickvals\":[0,50,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"50\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Number of Orders\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d37b12decdb2\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"}},\"cur_data\":\"d37b12decdb2\",\"visdat\":{\"d37b12decdb2\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\n# Daily revenues\n\ndf %>% \n filter(purchase_session == \"YES\") %>% \n group_by(event_date, campaign) %>% \n mutate(campaign = fct_rev(campaign)) %>%\n reframe(\n  revenues = sum(revenue)\n ) %>% \n ggplot(aes(x = event_date, y = revenues, fill = campaign)) +  \n geom_bar(stat = \"identity\", position = \"stack\", alpha = 0.7) +  # Bars\n # geom_area(position = \"stack\", alpha = 0.7) +  # Area\n labs(\n  title = \"Revenues per day\",\n  x = \"Date\", y = \"Revenue in US$\"\n ) +\n theme_minimal() -> gg\n\nggplotly(gg)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-df9a7cbee9f6b6c152cc\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-df9a7cbee9f6b6c152cc\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455],\"base\":[2761,3725,2033,6250,6272,5460,7200,9090,5057,4842,2687,3433,960,498,697,825,1043,1446,2298,450,774,1139,1165,2173,1947,3268,5663,3676,4200,2035,990],\"x\":[18569,18577,18580,18591,18593,18601,18611,18612,18613,18614,18618,18619,18620,18621,18622,18623,18625,18626,18627,18630,18631,18634,18638,18639,18642,18646,18647,18648,18649,18650,18653],\"y\":[279,121,101,89,89,79,166,552,468,429,56,39,169,54,7,97,76,158,55,47,60,37,48,14,103,235,143,86,175,122,58],\"text\":[\"event_date: 2020-11-03<br />revenues:   279<br />campaign: YES\",\"event_date: 2020-11-11<br />revenues:   121<br />campaign: YES\",\"event_date: 2020-11-14<br />revenues:   101<br />campaign: YES\",\"event_date: 2020-11-25<br />revenues:    89<br />campaign: YES\",\"event_date: 2020-11-27<br />revenues:    89<br />campaign: YES\",\"event_date: 2020-12-05<br />revenues:    79<br />campaign: YES\",\"event_date: 2020-12-15<br />revenues:   166<br />campaign: YES\",\"event_date: 2020-12-16<br />revenues:   552<br />campaign: YES\",\"event_date: 2020-12-17<br />revenues:   468<br />campaign: YES\",\"event_date: 2020-12-18<br />revenues:   429<br />campaign: YES\",\"event_date: 2020-12-22<br />revenues:    56<br />campaign: YES\",\"event_date: 2020-12-23<br />revenues:    39<br />campaign: YES\",\"event_date: 2020-12-24<br />revenues:   169<br />campaign: YES\",\"event_date: 2020-12-25<br />revenues:    54<br />campaign: YES\",\"event_date: 2020-12-26<br />revenues:     7<br />campaign: YES\",\"event_date: 2020-12-27<br />revenues:    97<br />campaign: YES\",\"event_date: 2020-12-29<br />revenues:    76<br />campaign: YES\",\"event_date: 2020-12-30<br />revenues:   158<br />campaign: YES\",\"event_date: 2020-12-31<br />revenues:    55<br />campaign: YES\",\"event_date: 2021-01-03<br />revenues:    47<br />campaign: YES\",\"event_date: 2021-01-04<br />revenues:    60<br />campaign: YES\",\"event_date: 2021-01-07<br />revenues:    37<br />campaign: YES\",\"event_date: 2021-01-11<br />revenues:    48<br />campaign: YES\",\"event_date: 2021-01-12<br />revenues:    14<br />campaign: YES\",\"event_date: 2021-01-15<br />revenues:   103<br />campaign: YES\",\"event_date: 2021-01-19<br />revenues:   235<br />campaign: YES\",\"event_date: 2021-01-20<br />revenues:   143<br />campaign: YES\",\"event_date: 2021-01-21<br />revenues:    86<br />campaign: YES\",\"event_date: 2021-01-22<br />revenues:   175<br />campaign: YES\",\"event_date: 2021-01-23<br />revenues:   122<br />campaign: YES\",\"event_date: 2021-01-26<br />revenues:    58<br />campaign: YES\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,0.7)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"YES\",\"legendgroup\":\"YES\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455,0.900000000001455],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[18567,18568,18569,18570,18571,18572,18573,18574,18575,18576,18577,18578,18579,18580,18581,18582,18583,18584,18585,18586,18587,18588,18589,18590,18591,18592,18593,18594,18595,18596,18597,18598,18599,18600,18601,18602,18603,18604,18605,18606,18607,18608,18609,18610,18611,18612,18613,18614,18615,18616,18617,18618,18619,18620,18621,18622,18623,18624,18625,18626,18627,18628,18629,18630,18631,18632,18633,18634,18635,18636,18637,18638,18639,18640,18641,18642,18643,18644,18645,18646,18647,18648,18649,18650,18651,18652,18653,18654,18655,18656,18657],\"y\":[700,4318,2761,1787,1355,2707,1455,3414,1951,3768,3725,3054,4828,2033,1396,4779,5592,3883,5152,8452,4002,3328,7144,9331,6250,2954,6272,6019,3187,10417,5563,4026,3791,5226,5460,1774,7323,7717,9105,8392,9384,5844,3432,5294,7200,9090,5057,4842,2392,1241,3101,2687,3433,960,498,697,825,1602,1043,1446,2298,953,996,450,774,983,1661,1139,1581,1363,853,1165,2173,1566,3004,1947,1390,383,969,3268,5663,3676,4200,2035,1872,2837,990,366,31,138,142],\"text\":[\"event_date: 2020-11-01<br />revenues:   700<br />campaign: NO\",\"event_date: 2020-11-02<br />revenues:  4318<br />campaign: NO\",\"event_date: 2020-11-03<br />revenues:  2761<br />campaign: NO\",\"event_date: 2020-11-04<br />revenues:  1787<br />campaign: NO\",\"event_date: 2020-11-05<br />revenues:  1355<br />campaign: NO\",\"event_date: 2020-11-06<br />revenues:  2707<br />campaign: NO\",\"event_date: 2020-11-07<br />revenues:  1455<br />campaign: NO\",\"event_date: 2020-11-08<br />revenues:  3414<br />campaign: NO\",\"event_date: 2020-11-09<br />revenues:  1951<br />campaign: NO\",\"event_date: 2020-11-10<br />revenues:  3768<br />campaign: NO\",\"event_date: 2020-11-11<br />revenues:  3725<br />campaign: NO\",\"event_date: 2020-11-12<br />revenues:  3054<br />campaign: NO\",\"event_date: 2020-11-13<br />revenues:  4828<br />campaign: NO\",\"event_date: 2020-11-14<br />revenues:  2033<br />campaign: NO\",\"event_date: 2020-11-15<br />revenues:  1396<br />campaign: NO\",\"event_date: 2020-11-16<br />revenues:  4779<br />campaign: NO\",\"event_date: 2020-11-17<br />revenues:  5592<br />campaign: NO\",\"event_date: 2020-11-18<br />revenues:  3883<br />campaign: NO\",\"event_date: 2020-11-19<br />revenues:  5152<br />campaign: NO\",\"event_date: 2020-11-20<br />revenues:  8452<br />campaign: NO\",\"event_date: 2020-11-21<br />revenues:  4002<br />campaign: NO\",\"event_date: 2020-11-22<br />revenues:  3328<br />campaign: NO\",\"event_date: 2020-11-23<br />revenues:  7144<br />campaign: NO\",\"event_date: 2020-11-24<br />revenues:  9331<br />campaign: NO\",\"event_date: 2020-11-25<br />revenues:  6250<br />campaign: NO\",\"event_date: 2020-11-26<br />revenues:  2954<br />campaign: NO\",\"event_date: 2020-11-27<br />revenues:  6272<br />campaign: NO\",\"event_date: 2020-11-28<br />revenues:  6019<br />campaign: NO\",\"event_date: 2020-11-29<br />revenues:  3187<br />campaign: NO\",\"event_date: 2020-11-30<br />revenues: 10417<br />campaign: NO\",\"event_date: 2020-12-01<br />revenues:  5563<br />campaign: NO\",\"event_date: 2020-12-02<br />revenues:  4026<br />campaign: NO\",\"event_date: 2020-12-03<br />revenues:  3791<br />campaign: NO\",\"event_date: 2020-12-04<br />revenues:  5226<br />campaign: NO\",\"event_date: 2020-12-05<br />revenues:  5460<br />campaign: NO\",\"event_date: 2020-12-06<br />revenues:  1774<br />campaign: NO\",\"event_date: 2020-12-07<br />revenues:  7323<br />campaign: NO\",\"event_date: 2020-12-08<br />revenues:  7717<br />campaign: NO\",\"event_date: 2020-12-09<br />revenues:  9105<br />campaign: NO\",\"event_date: 2020-12-10<br />revenues:  8392<br />campaign: NO\",\"event_date: 2020-12-11<br />revenues:  9384<br />campaign: NO\",\"event_date: 2020-12-12<br />revenues:  5844<br />campaign: NO\",\"event_date: 2020-12-13<br />revenues:  3432<br />campaign: NO\",\"event_date: 2020-12-14<br />revenues:  5294<br />campaign: NO\",\"event_date: 2020-12-15<br />revenues:  7200<br />campaign: NO\",\"event_date: 2020-12-16<br />revenues:  9090<br />campaign: NO\",\"event_date: 2020-12-17<br />revenues:  5057<br />campaign: NO\",\"event_date: 2020-12-18<br />revenues:  4842<br />campaign: NO\",\"event_date: 2020-12-19<br />revenues:  2392<br />campaign: NO\",\"event_date: 2020-12-20<br />revenues:  1241<br />campaign: NO\",\"event_date: 2020-12-21<br />revenues:  3101<br />campaign: NO\",\"event_date: 2020-12-22<br />revenues:  2687<br />campaign: NO\",\"event_date: 2020-12-23<br />revenues:  3433<br />campaign: NO\",\"event_date: 2020-12-24<br />revenues:   960<br />campaign: NO\",\"event_date: 2020-12-25<br />revenues:   498<br />campaign: NO\",\"event_date: 2020-12-26<br />revenues:   697<br />campaign: NO\",\"event_date: 2020-12-27<br />revenues:   825<br />campaign: NO\",\"event_date: 2020-12-28<br />revenues:  1602<br />campaign: NO\",\"event_date: 2020-12-29<br />revenues:  1043<br />campaign: NO\",\"event_date: 2020-12-30<br />revenues:  1446<br />campaign: NO\",\"event_date: 2020-12-31<br />revenues:  2298<br />campaign: NO\",\"event_date: 2021-01-01<br />revenues:   953<br />campaign: NO\",\"event_date: 2021-01-02<br />revenues:   996<br />campaign: NO\",\"event_date: 2021-01-03<br />revenues:   450<br />campaign: NO\",\"event_date: 2021-01-04<br />revenues:   774<br />campaign: NO\",\"event_date: 2021-01-05<br />revenues:   983<br />campaign: NO\",\"event_date: 2021-01-06<br />revenues:  1661<br />campaign: NO\",\"event_date: 2021-01-07<br />revenues:  1139<br />campaign: NO\",\"event_date: 2021-01-08<br />revenues:  1581<br />campaign: NO\",\"event_date: 2021-01-09<br />revenues:  1363<br />campaign: NO\",\"event_date: 2021-01-10<br />revenues:   853<br />campaign: NO\",\"event_date: 2021-01-11<br />revenues:  1165<br />campaign: NO\",\"event_date: 2021-01-12<br />revenues:  2173<br />campaign: NO\",\"event_date: 2021-01-13<br />revenues:  1566<br />campaign: NO\",\"event_date: 2021-01-14<br />revenues:  3004<br />campaign: NO\",\"event_date: 2021-01-15<br />revenues:  1947<br />campaign: NO\",\"event_date: 2021-01-16<br />revenues:  1390<br />campaign: NO\",\"event_date: 2021-01-17<br />revenues:   383<br />campaign: NO\",\"event_date: 2021-01-18<br />revenues:   969<br />campaign: NO\",\"event_date: 2021-01-19<br />revenues:  3268<br />campaign: NO\",\"event_date: 2021-01-20<br />revenues:  5663<br />campaign: NO\",\"event_date: 2021-01-21<br />revenues:  3676<br />campaign: NO\",\"event_date: 2021-01-22<br />revenues:  4200<br />campaign: NO\",\"event_date: 2021-01-23<br />revenues:  2035<br />campaign: NO\",\"event_date: 2021-01-24<br />revenues:  1872<br />campaign: NO\",\"event_date: 2021-01-25<br />revenues:  2837<br />campaign: NO\",\"event_date: 2021-01-26<br />revenues:   990<br />campaign: NO\",\"event_date: 2021-01-27<br />revenues:   366<br />campaign: NO\",\"event_date: 2021-01-28<br />revenues:    31<br />campaign: NO\",\"event_date: 2021-01-29<br />revenues:   138<br />campaign: NO\",\"event_date: 2021-01-30<br />revenues:   142<br />campaign: NO\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,0.7)\",\"line\":{\"width\":1.88976377952756,\"color\":\"transparent\"}},\"name\":\"NO\",\"legendgroup\":\"NO\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":54.7945205479452},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Revenues per day\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[18562.005,18661.995],\"tickmode\":\"array\",\"ticktext\":[\"Nov\",\"Dec\",\"Jan\",\"Feb\"],\"tickvals\":[18567,18597,18628,18659],\"categoryorder\":\"array\",\"categoryarray\":[\"Nov\",\"Dec\",\"Jan\",\"Feb\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Date\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-520.85,10937.85],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"2500\",\"5000\",\"7500\",\"10000\"],\"tickvals\":[0,2500,5000,7500,10000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"2500\",\"5000\",\"7500\",\"10000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Revenue in US$\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"campaign\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d37b990222d\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"}},\"cur_data\":\"d37b990222d\",\"visdat\":{\"d37b990222d\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n## EDA of Session length\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n group_by(campaign) %>% \n mutate(campaign = fct_rev(campaign)) %>%\n ggdensity(\n  x = \"TTP\", add = \"median\", color = \"campaign\", fill = \"campaign\",\n  alpha = 0.2, rug = F\n ) +\n labs(title = \"Session length for campaign and no-campaign sessions\") +\n  theme(\n   axis.ticks.y = element_blank(),   # Hide y-axis ticks\n   axis.text.y = element_blank(),    # Hide y-axis labels\n )\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/eda_session_length-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndf %>% \n group_by(purchase_session) %>% \n mutate(purchase_session = fct_rev(purchase_session)) %>%\n ggdensity(\n  x = \"TTP\", add = \"median\", color = \"purchase_session\", fill = \"purchase_session\",\n  alpha = 0.2, rug = F\n ) +\n labs(title = \"Session length for purchase and browse-only sessions\") +\n  theme(\n   axis.ticks.y = element_blank(),   # Hide y-axis ticks\n   axis.text.y = element_blank(),    # Hide y-axis labels\n )\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/eda_session_length-2.png){width=672}\n:::\n\n```{.r .cell-code}\ndf %>% \n group_by(campaign) %>% \n filter(purchase_session == \"YES\") %>% \n mutate(campaign = fct_rev(campaign)) %>%\n ggdensity(\n  x = \"TTP\", add = \"median\", color = \"campaign\", fill = \"campaign\",\n  alpha = 0.2, rug = F\n ) +\n labs(title = \"Session length for purchase sessions in campaign and no-campaign\") +\n  theme(\n   axis.ticks.y = element_blank(),   # Hide y-axis ticks\n   axis.text.y = element_blank(),    # Hide y-axis labels\n )\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/eda_session_length-3.png){width=672}\n:::\n:::\n\n\n\n## Days in which the campaign was run\n\nCould the differences in conversion rate and total revenue during campaign days be explained by substantial differences in the number of days in which the campaign was run?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_weekdays <- df %>% \n group_by(weekday_name, campaign) %>% \n count() %>% \n pivot_wider(names_from = campaign, values_from = n) %>% \n select(weekday_name, YES) %>% \n rename(N_days = YES)\n\n\n\ncampaign_conversion_rates <- df %>%\n group_by(weekday_name, campaign, purchase_session) %>% \n count() %>% \n group_by(weekday_name, campaign) %>% \n mutate(total = sum(n)) %>%\n ungroup %>% \n filter(purchase_session == \"YES\", campaign == \"YES\") %>% \n mutate(conversion_rate = round(n/total*100,1))  %>% \n select(weekday_name, conversion_rate) \n\n\nn_weekdays %>% \n  inner_join(campaign_conversion_rates, by = \"weekday_name\") %>% \n ggplot(aes(x = N_days, y = conversion_rate)) +\n geom_point(size=10) +\n theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nn_weekdays %>%\n  inner_join(campaign_conversion_rates, by = \"weekday_name\") %>%\n  ggplot(aes(x = N_days, y = conversion_rate, label = weekday_name)) +\n  geom_point(size = 10) +\n  geom_text(vjust = 3.5) +  # Adjust the vertical position of the labels\n  ylim(-2, NA) +  # Set the y-axis limits to start from -2\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Marketing_Analysis_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Marketing_Analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/tabwid-1.1.2/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.0/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}